
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>David Cramer's Blog</title>
  <meta name="author" content="David Cramer">

  
  <meta name="description" content="We have pushed out iBegin Share 2.3 (and wp plugin 1.2 to go along with it). It&#8217;s a pretty mild update, that includes one pretty cool new &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://justcramer.com/blog/page/9">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/DavidCramernet" rel="alternate" title="David Cramer's Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">David Cramer's Blog</a></h1>
  
    <h2>Python at Scale.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/DavidCramernet" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:justcramer.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/archives/">Archives</a></li>
  <li><a href="/resume/">Resume</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/04/16/ibegin-share-23-now-with-stats">iBegin Share 2.3 &#8211; Now With Stats!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-16T00:00:00-07:00" pubdate data-updated="true">Apr 16<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>We have pushed out <a href="http://www.ibegin.com/labs/share/">iBegin Share 2.3</a> (and wp plugin 1.2 to go along with it). It&#8217;s a pretty mild update, that includes one pretty cool new feature: Statistics. We&#8217;ve built in some quick stats to let you see how people are using the share plugin, on your blog, or standalone (although the WP integration is pretty wicked).</p>

<p>We have also updated the button to use the open share icon.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/04/14/php-vs-python">PHP vs Python &#8211; Where Opinions Aren&#8217;t Wanted</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-14T00:00:00-07:00" pubdate data-updated="true">Apr 14<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Constantly, and only in Python channels, I hear the argument brought up that &#8220;PHP is &lt;insert random insult&gt;&#8221; or &#8220;&lt;N&gt; is a PHP developer so he must suck&#8221;. One of the things I hate most, is stereotypes, based on false information. Stereotypes about people from Texas being rednecks are ok, because it&#8217;s true. Now, let&#8217;s get into this a bit more.</p>

<p>PHP is thought of as a poor language because:<br><ul><br><li>Namespaces are nonexistent.</li><br><li>There are 80000 globals.</li><br><li>The language is very lazy in its syntax. You can code in at least a dozen styles.</li><br><li>You haven&#8217;t used the language but you like to troll.</li><br><li>[insert a hundred random reasons]</li><br></ul></p>

<p>Now while these are VERY valid points, this doesn&#8217;t make PHP a horrible language. Let&#8217;s take a look at something like Perl. Now, I&#8217;m sure I&#8217;m going to get an earful for this, but it&#8217;s completely fucking useless. It&#8217;s not good for web apps, it&#8217;s outdone for shell scripting, and it&#8217;s not very useful as a scripting language (relative to other, more useful languages, such as LUA). PHP also has an extremely high availability, and is relatively simple to deploy. Python doesn&#8217;t, and isn&#8217;t (each site needs it&#8217;s own configuration to an extent).</p>

<p>The fact of the matter is, PHP tends to attract more unprofessional developers, and younger developers, because it is so widespread. If Python was the same, you would be able to talk just as much smack about it as you do PHP. So more to the point. <strong>There is nothing wrong with PHP or PHP developers</strong>.</p>

<p>And yes, I write both PHP, and Python, and I excel at both, but I prefer Python. So please, educate yourself, and stop talking shit :)</p>

<p>(For the record, no one has said anything bad about my PHP code, I just get tired of hearing the opinion &#8220;PHP sucks&#8221;.)</p>

<p><strong>Correction: I wrote this hastily, so let me correct myself. I don&#8217;t mean in by any shape or form Perl sucks. What I meant to say, was it&#8217;s completely outdated. There haven&#8217;t been any *real* updates to the language in quite a while (correct me if I&#8217;m wrong).</strong></p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/04/14/jinja-2-is-coming">Jinja 2 Is Coming</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-14T00:00:00-07:00" pubdate data-updated="true">Apr 14<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The guys over at <a href="http://www.pocoo.org">Pocoo</a> have been hard at work on Jinja 2 lately. So far it&#8217;s looking awesome. The benchmarks are outstanding (putting it even further ahead of Django, and faster than Mako even), and some of the additions, and changes, such as the awesome addition to <code>for x in iterable [if expr]</code> are going to make things even easier.</p>

<p>This is my shameless plug for them, so check out the <a href="http://lucumr.pocoo.org/cogitations/2008/04/13/jinja2-making-things-awesome/trackback/">Jinja 2 updates</a> for more information!</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/04/13/php-database">Php-database</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-13T00:00:00-07:00" pubdate data-updated="true">Apr 13<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This afternoon I posted my <a href="http://code.google.com/p/php-database/">PHP database library</a> on Google code. It&#8217;s designed to be very lightweight, and uses the PHP4 MySQL functions as well as the PostgreSQL functions, but is built for PHP5. It uses sprintf formatting, and works must like the Python database cursor&#8217;s, to help alleviate injection concerns while you are writing your SQL queries. It also uses lazy connections, so you don&#8217;t need to worry about connecting to your database when you won&#8217;t be executing any statements.</p>

<p>For example:</p>
<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">// initiate connection</span>
</span><span class='line'><span class="x">$db = new MySQLdb(&#39;localhost&#39;, &#39;root&#39;, &#39;mysupersecretpassword&#39;, false, &#39;database_name&#39;);</span>
</span><span class='line'><span class="x">// query something useless</span>
</span><span class='line'><span class="x">$query = $db-&gt;query(&#39;SELECT 1 FROM mytable WHERE value = %s&#39;, true);</span>
</span><span class='line'><span class="x">$result = $db-&gt;fetch-array($query);</span>
</span><span class='line'><span class="x">$value = $result[0]</span>
</span><span class='line'><span class="x">// or alternatively</span>
</span><span class='line'><span class="x">$result = $db-&gt;query_result(&#39;SELECT 1 FROM mytable WHERE value = %s LIMIT 1&#39;, true);</span>
</span><span class='line'><span class="x">$value = $result[0]</span>
</span><span class='line'><span class="x">// or even more of a shortcut</span>
</span><span class='line'><span class="x">$value = $db-&gt;query_result_single(&#39;SELECT 1 FROM mytable WHERE value = %s LIMIT 1&#39;, true);</span>
</span></code></pre></td></tr></table></div></figure>

It automatically converts arguments including booleans, strings, integers, and null values, to their appropriate data type in MySQL, and will quote the data if nescesary. It also automatically runs proper escapes on any data.

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">$db-&gt;query(&quot;SELECT 1 FROM mytable WHERE bool_value = %s AND null_value = %s AND string_value = %s AND int_value = %s&quot;, true, null, &#39;hello&#39;, 1);</span>
</span></code></pre></td></tr></table></div></figure>

<p>If someone wishes to force me to learn the <code>mysqli_</code> functions, feel free to send me the changes to the library and I will gladly implement them. Also, I&#8217;m aware that PDO and other extensions exist, but a database library isn&#8217;t complicated. When deploying code on many servers, it&#8217;s much easier to have things present in the code base, than to require on external dependencies.</p>

<p>Hope this is useful!</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/04/11/file-fields-without-renaming-duplicates">File Fields Without Renaming Duplicates</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-11T00:00:00-07:00" pubdate data-updated="true">Apr 11<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I had a need for a file storage system, which would keep the original file name in tact, no matter what. By default, Django&#8217;s FileField&#8217;s only allow you to base the directory name on the datetime. While this is good for the most part, you can still have duplicate file names if they are added on the same day.</p>

<p>So, after a few headaches, here&#8217;s what I call the <code>UsefulFileField</code>:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">os.path</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">time</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">UsefulFileField</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">FileField</span><span class="p">):</span>
</span><span class='line'>    <span class="n">_path</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">get_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span class='line'>        <span class="n">f</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_directory_name</span><span class="p">(),</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">get_directory_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">upload_to</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)))</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">UsefulImageField</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">):</span>
</span><span class='line'>    <span class="n">_path</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">get_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span class='line'>        <span class="n">f</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_directory_name</span><span class="p">(),</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">get_directory_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">upload_to</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)))</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span>
</span></code></pre></td></tr></table></div></figure>

An example use:

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span class='line'>    <span class="n">screenshot</span>  <span class="o">=</span> <span class="n">UsefulImageField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s">&quot;screenshots/</span><span class="si">%s</span><span class="s">/</span><span class="si">%s</span><span class="s">/&quot;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/04/04/ibegin-share-update">iBegin Share Update</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-04T00:00:00-07:00" pubdate data-updated="true">Apr 4<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>We released new versions of iBegin Share and the Wordpress plug-in this morning. These are critical updates to solve display inconsistencies across browsers. You can grab them both over at <a href="http://labs.ibegin.com/">the labs</a>.</p>

<p>If you don&#8217;t know what iBegin Share is, it&#8217;s a simple tool which allows you to &#8220;share&#8221; pages of your website. It&#8217;s very similar to things like ShareThis, except that it adds even more depth to the situation. You can view a demo of it by clicking &#8220;Share&#8221; below the title of this post.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/04/04/announcing-django-sphinx-200">Announcing Django-sphinx 2.0.0 Full-text Search</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-04T00:00:00-07:00" pubdate data-updated="true">Apr 4<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One of my tasks lately has been updating the <a href="http://code.google.com/p/django-sphinx">django-sphinx</a> library to work with Sphinx 0.98, as it includes GIS components which we have been wanting to possibly utilize on our new search engine. So today, the conclusion of.. very few hours of work, I&#8217;d like to announce 2.0.0 of the Django integration.</p>

<p>The SphinxSearch manager has been completely rewritten to rely strictly on the Python Sphinx API (a request from the author of Sphinx), which means it should have much more compatibility with newer versions in the future. I have also updated the querysets it returns to work like normal Django QuerySet instances, to where they clone themselves so you can fork your queryset into several different actions.</p>

<p>The search results also now have a proxy which wraps each object. This proxy is specifically geared towards <a href="http://code.djangoproject.com/ticket/17">ticket #17</a>, and allows you to access a <code>_sphinx</code> attribute on each instance, without actually modifying that instance. You can also now access a <code>_sphinx</code> attribute on the queryset itself. Both of these contain relative meta-data for their object.</p>

<p>So, a quick usage example using the new API:<br><pre><br>In [1]: from sphinxtest.tests.models import *</p>

<p>In [2]: x = Document.search.query('a')</p>

<p>In [3]: x._sphinx<br>Out[3]:<br>{'total': 10,<br>'total_found': 10,<br>'words': [{'docs': 10, 'hits': 10, 'word': 'a'}]}</p>

<p>In [4]: x<br>Out[4]: [&lt;Document: Document object&gt;, &lt;Document: Document object&gt;, &lt;Document: Document object&gt;, &lt;Document: Document object&gt;, &lt;Document: Document object&gt;, &lt;Document: Document object&gt;, &lt;Document: Document object&gt;, &lt;Document: Document object&gt;, &lt;Document: Document object&gt;, &lt;Document: Document object&gt;]</p>

<p>In [5]: x[0]._sphinx<br>Out[5]: {'weight': 1}</p>

<p>In [6]: x[0].title<br>Out[6]: u'Document 0'</p>

<p>In [7]: type(x)<br>Out[7]: &lt;class 'djangosphinx.SphinxSearch'&gt;</p>

<p>In [8]: type(x[0])<br>Out[8]: &lt;class 'djangosphinx.SphinxProxy'&gt;<br></pre></p>

<p>As you can see, it&#8217;s full backwards compatible. Calling <code>queryset._sphinx</code> will force evaluation on the queryset. Grab the release over at <a href="http://code.google.com/p/django-sphinx">Google code</a>.</p>

<p>Comments and criticism, send em my way :)</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/04/02/segmentation-fault">Segmentation Fault</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-02T00:00:00-07:00" pubdate data-updated="true">Apr 2<span>nd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Last week I made the decision to begin the conversion from MySQL to PostgreSQL. Well, more of a benchmark conversion, but none the less. So we begin the installation..</p>

<p>I installed PostgreSQL server, version 8.2, painlessly both locally and on our staging server. I then installed psycopg2 via Python setuptools. Nice, quick and easy, right? <strong>Segmentation Fault</strong> when I try to sync up the database. So I figure maybe setuptools is outdated, and I removed psycopg2 and grabbed it with Darwin Ports. &#8220;Warning: [&#8230;]&#8221; everytime its initialized. I finally managed to get it working by downloading the source and compiling it. About an hour later, the only thing left to do is import the data&#8230;</p>

<p>First I needed to sync the database, <code>manage.py syncdb</code>. Yep, Django makes it quick and easy. Things worked fine, no problems yet.  I began importing the www.ibegin.com database (12 million business listings, among other meta data). About 10% through California (which is massive) I get &#8220;Cannot Adapt&#8221;. First thing that comes through my head is &#8220;What the fuck kind of error message is that?&#8221;. I come from a strictly MySQL background, and I stand behind it to this day. After a little bit of searching, and pestering #postgresql on freenode, I learned that <em>somehow</em> the primary key sequence had corrupted itself.</p>

<p>Correcting the sequence was fairly easy. You select the max value currently, and then do <code>setval()</code> or <code>nextval()</code> respectively on the sequence to fix it. I had no idea why this had occurred however.  I get done about 70% of the way through California, and notice my importer is slowing down. Oh, that&#8217;s right, my version of Django is still horrendously slow because it&#8217;s missing <a href="http://code.djangoproject.com/ticket/17">#17</a>.</p>

<p>I quickly optimize my script to store everything in memory, and turn off <code>settings.DEBUG</code> because it wastes too damn much memory. I then continue the import from where it left off, and I notice that every so often it hangs. I check my indexes, and my select queries, and they&#8217;re all blazing fast. After a bit more pestering of the #postgresql people, I learned that PGSQL <strong>sucks hardcore</strong> on count queries. Now I didn&#8217;t plan to use them like I was in the importer, but that&#8217;s still a pretty big setback. So, the 1,000,000 extra meta rows that would exist, will have to wait until the import is fully finished.</p>

<p>I get done with California, and move on to Florida, another fairly large state. I screen it and go to bed. I wake up to <strong>Cannot Adapt</strong> Again, &#8220;What the fuck!?&#8221;. This was getting very tiresome, and still is. I&#8217;m still only about 50% done with the import and I&#8217;ve had this come up at least a half dozen times already.</p>

<p>All in all, PostgreSQL is neat. Transactions are great. Row-locking is great. MySQL&#8217;s InnoDB isn&#8217;t. It has a GIS framework. It causes a lot of headaches. Weighing the pros vs the cons, we&#8217;re going to stick with it. We&#8217;ll be deploying the new iBegin.com page (powered by Django) running a PostgreSQl 8.3 database, which will be pretty massive, to which I&#8217;m hoping that I don&#8217;t have to patch Django for ticket #17 to handle it.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/04/01/dont-use-padding-or-margin-on-body-tags">Don&#8217;t Use Padding or Margin on BODY Tags</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-01T00:00:00-07:00" pubdate data-updated="true">Apr 1<span>st</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Today I was adding full screen support to <a href="http://labs.ibegin.com/ibox">iBox</a>, and I hit an IE6 bug. The bug is introduced because the <code>BODY</code> tag had either <code>margin</code> or <code>padding</code> values of more than 0. This is a number of problems we&#8217;ve had with calculating positions because of the <code>BODY</code> clauses containing these extra pixels.</p>

<p>The solution:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="ni">&amp;lt;</span>style type=&quot;text/css&quot;<span class="ni">&amp;gt;</span>
</span><span class='line'>/* Remove the default margin and padding. */
</span><span class='line'>body { padding: 0; margin: 0; }
</span><span class='line'>
</span><span class='line'>/* Put your padding/margin on the wrapper clause. */
</span><span class='line'><span class="ni">&amp;lt;</span>/style<span class="ni">&amp;gt;</span>
</span><span class='line'><span class="ni">&amp;lt;</span>body<span class="ni">&amp;gt;</span>
</span><span class='line'><span class="ni">&amp;lt;</span>div id=&quot;wrapper&quot;<span class="ni">&amp;gt;</span>
</span><span class='line'><span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;</span>
</span><span class='line'><span class="ni">&amp;lt;</span>/body<span class="ni">&amp;gt;</span>
</span></code></pre></td></tr></table></div></figure>

<p>The reasoning behind this, is that most JS objects which need to go outside of the page frame, are appending to BODY. When they&#8217;re appending they can position themselves wherever they need to be. However, if it needs to be say, 100% height, it&#8217;s a <acronym title="Pain in the Ass">PITA</acronym> to calculate that 100% if there&#8217;s margin or padding on an enclosing tag.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/03/29/using-jinja-with-django">Using Jinja With Django</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-29T00:00:00-07:00" pubdate data-updated="true">Mar 29<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Every time I meet someone new who asks me about Django, I tell them exactly what I think. It&#8217;s a great product. It does exactly what it&#8217;s designed to do. Allows you to build decently structured applications rapidly, without much overhead in doing so. One of the other things I tell them, is that the first they should do is scrap the template engine, and install Jinja.<br></div>
  
  
    <footer>
      <a rel="full-article" href="/2008/03/29/using-jinja-with-django">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/10/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/8/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2012/04/08/using-arrays-as-materialized-paths-in-postgres">Using Arrays as Materialized Paths in Postgres</a>
      </li>
    
      <li class="post">
        <a href="/2011/11/10/scaling-schema-changes">Scaling Schema Changes</a>
      </li>
    
      <li class="post">
        <a href="/2011/08/05/extending-django-nose">Integrating Django with Nose at DISQUS</a>
      </li>
    
      <li class="post">
        <a href="/2011/07/20/python-and-os-x-lion">Python and OS X Lion</a>
      </li>
    
      <li class="post">
        <a href="/2011/06/24/europython">EuroPython</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/dcramer">@dcramer</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'dcramer',
            count: 10,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("zeeg", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/zeeg" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @zeeg</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - David Cramer -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'davidcramer';
      
        
        // var disqus_developer = 1;
        
            var disqus_identifier = ''
        
        var disqus_url = 'http://justcramer.com/blog/page/9/index.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script type="text/javascript">
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '4f0ffdc0844d521595000001');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>

</body>
</html>
