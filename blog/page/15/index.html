
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>David Cramer's Blog</title>
    <meta name="author" content="David Cramer">

    
    <meta name="description" content="Passionate Web/Graphics Designer for Curse Gaming We&#8217;re looking to add a member to the team over at Curse. If you have a talent in web/ &hellip;">
    
    <meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=1">

    <link href="http://feeds.feedburner.com/DavidCramernet" rel="alternate" title="David Cramer's Blog" type="application/atom+xml">
    <link rel="canonical" href="">
    <link href="/favicon.png" rel="shortcut icon">
    <link href="/stylesheets/screen.css?1" media="screen, projection" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript">
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '4f0ffdc0844d521595000001');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>
    

</head>

<body>
	<header class="inner"><h1><a href="/">David Cramer's Blog</a></h1>
<nav class="menu"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<div class="right">
	<form class="search right" action="http://google.com/search" method="get">
		<input class="left" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:justcramer.com">
	</form>
	<div class="social right">
		
		
		
		<a class="twitter" href="http://twitter.com/zeeg" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/dcramer" title="GitHub">GitHub</a>
		
		
		
		<a class="rss" href="http://feeds.feedburner.com/DavidCramernet" title="RSS">RSS</a>
		
	</div>
</div>

</header>
	<div id="content" class="inner">


    <article class="post">
    <h1 class="title"><a href="/2006/11/15/passionate-webgraphics-designer-for-curse-gaming">Passionate Web/Graphics Designer for Curse Gaming</a></h1>
    <div class="entry">
        <p>We&#8217;re looking to add a member to the team over at Curse. If you have a talent in web/graphics design I encourage you to check out the <a href="http://www.sitepoint.com/forums/showthread.php?threadid=438020">requirements</a>.</p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2006-11-15T00:00:00-08:00" pubdate data-updated="true">Nov 15<span>th</span>, 2006</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2006/10/29/a-better-object-tracking">A Better Object Tracking</a></h1>
    <div class="entry">
        <p>After having built the system on our new CMS, and a couple suggestions from a friend, I came up with a better tracking system as I originally <a href="http://www.davidcramer.net/other/27/tracking-unread-objects.html">detailed on my blog</a>. The new system is combination of the second method detailed in the post, and a much more accurate solution.</p>

<p>We continue to track the last login time in our session (and database, if they&#8217;re logged in), but we now also track a time for each object they have viewed. Whenever they view an object, you update a list in your session w/ that object&#8217;s key, and the current time. Now you simply compare the time they viewed that object (if it exists) with the last updated time, and you have a quick, database-free, tracking solution.</p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2006-10-29T00:00:00-07:00" pubdate data-updated="true">Oct 29<span>th</span>, 2006</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2006/10/23/curse-gaming-beta-tests-new-website">Curse Gaming Beta Tests New Website</a></h1>
    <div class="entry">
        <p>Curse Gaming is beta testing their new website. They are doing a stress test on the new platform which is running the Django framework.<br/><br/><a href="http://www.curse-gaming.com/en/news-394-1-curse-version-3.html">read more</a>&nbsp;|&nbsp;<a href="http://digg.com/gaming_news/Curse_Gaming_beta_tests_new_website">digg story</a></p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2006-10-23T00:00:00-07:00" pubdate data-updated="true">Oct 23<span>rd</span>, 2006</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2006/10/22/tracking-unread-objects">Tracking Unread Objects</a></h1>
    <div class="entry">
        <p>Recently I&#8217;ve had to develop forum software for a website, and one problem we ran into was the most robust way to track unread posts.</p>

<p>After giving this some thought, I came up with two feasable options. We&#8217;ll start by taking a look at the first.</p>

<p><strong>Pure Post Tracking</strong></p>

<p>Method one is to create a table:<br><blockquote>&#8220;forum_views&#8221;<br>postID (IntegerField)<br>userID (IntegerField)<br>Index (postID, userID)</blockquote><br>Everytime a user would view a post (that was marked as unread) we would insert a row into the table. To output the list of posts, or threads, we would be join the thread with this table.</p>

<p>Cons:<br><ul><br><li>In order to show the list of threads, or forums, you have to use a LEFT JOIN with the Thread and Views table (even on the forum index) which can be extremely slow on high load websites.</li><br><li>A different queryset is used for each user, so there&#8217;s no worthwhile caching for this method.</li><br><li>Upon viewing a thread you have to perform a query for each post that is marked as unread.</li><br></ul><br>Pros:<br><ul><br><li>It gives exact tracking on if a user has viewed a post.</li><br></ul><br>Obviously, the pros do NOT outweigh the cons, so let&#8217;s move on to the other method:</p>

<p><strong>Session Time Tracking</strong></p>

<p>The idea of this is simple, and extremely quick. Our first step is to modify our User table if it&#8217;s not already setup properly. We need to add one field:<br><blockquote>&#8220;users&#8221;<br>lastVisitTime (DateTimeField)</blockquote><br>Ok now we have a field in our users table, which tracks the last time they visited the website. Now, obviously, the first obstacle is keeping the last visit time, as the time they last visisted the site, and not the last time they viewed a page. The way we will do this is quite simple:<br><ol><br><li>First and foremost, we validate their login details, if they&#8217;re not anonymous.</li><br><li>Next we check for a session variable, let&#8217;s call it &#8220;user_lastvisit&#8221;.</li><br><li>If this variable does not exist, we will set it to the data in our table for lastVisitTime, or -1 (if they&#8217;re anonymous, or have no lastVisitTime)</li><br><li>If they are not anonymous, we now need to update our User table lastVisitTime with the current time.</li><br></ol><br>Now, as you can see, we have the session variable, user_lastvisit, and we can use this in our template, or view, in a loop over all of the <strong>cached</strong> query results, to see if the last reply time is greater than the last visit time.</p>

<p>Cons:<br><ul><br><li>It&#8217;s generic tracking; the minute the session is destroyed it marks all threads as read.</li><br><li>It does not track on a per-thread basis, although it could be combined with example #1 to do so.</li><br></ul><br>Pros:<br><ul><br><li>Extremely robust and quick, works well with caching solutions.</li><br><li>No large database overhead for tracking views.</li><br><li>No added database load for marking threads as read.</li><br></ul><br>If you want accurate tracking, I would recommend tracking views as said in example #1, with the views table, and then using example #2 for tracking on lists. The accurate tracking is most notably usable in search results.</p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2006-10-22T00:00:00-07:00" pubdate data-updated="true">Oct 22<span>nd</span>, 2006</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2006/09/19/avast-me-hearties">Avast, Me Hearties!</a></h1>
    <div class="entry">
        <p>Today be International Talk like a Sea dog Tide. Sea dogs an&#8217; land lubbers&#8217;s encouraged t&#8217; spice up the&#8217;r vocabulary today wi&#8217; a wee trusty gentleman o&#8217; fortune phrases an&#8217; kick aft on th&#8217; beach wi&#8217; a keg o&#8217; rum.</p>

<p>Be havin&#8217; fun!</p>

<p>Play World o&#8217; Warcraft? Ye may want t&#8217; check ou&#8217; this addon by Blaquen: <a href="http://www.curse-gaming.com/en/wow/addons-4504-1-piratespeak.html">Pirate Speak</a></p>

<p><a href="ftp://ftp.nibbits.com/PirateSong.mp3"><strong>Th&#8217; Official Tune</strong></a></p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2006-09-19T00:00:00-07:00" pubdate data-updated="true">Sep 19<span>th</span>, 2006</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2006/08/06/integrating-mediawiki-with-vanilla-forums">Integrating MediaWiki With Vanilla Forums</a></h1>
    <div class="entry">
        <p>Today I undertook the challenge, or rather the lack-of, of <a href="http://lussumo.com/addons/index.php?PostBackAction=AddOn&AddOnID=130">integrating the MediaWiki userbase with Vanilla&#8217;s forum software</a>. This provides the nice ability to run MediaWiki and Vanilla forums without having two distinct authentication systems. It&#8217;s also a nice way of making people apply for access to edit the Wiki :)</p>

<p>Because Wordpress is horrible with this kind of stuff, I&#8217;ve moved it to <a href="http://lussumo.com/addons/index.php?PostBackAction=AddOn&AddOnID=130">Lussumo&#8217;s extension&#8217;s page</a>.</p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2006-08-06T00:00:00-07:00" pubdate data-updated="true">Aug 6<span>th</span>, 2006</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2006/08/01/sql-optimization-with-disk-caching-in-php">SQL Optimization With Disk Caching in PHP</a></h1>
    <div class="entry">
        <p>One big thing with large sites is optimization, and a major factor in most sites is SQL. In the end, all optimization methods begin, and most likely end, with a caching solution. While disk caching is not the only solution, in my opinion, for most situations, it is the best solution.</p>

<p>With Nibbits I was in need of such a solution. Nibbits itself is extremely optimized in the code and the SQL queries, but even the most optimized code still can only handle so much load. So today, with about 30 minutes of spare time, I whipped up a quick standard disk caching library.</p>

<p>As always, you can grab the source for my <a href="/projects/diskCache.phps">PHP disk caching class.</a></p>

<p>The class follows the standard calls you see in nearly every major caching system, get and set.<br><blockquote><code>$c = new cache();<br>if (!$data = $c->get('group', 'unique id'))<br>{<br>$data = 'this was cached at '.date();<br>$c->set('group', 'unique id', 10, $data);<br>}</code></blockquote><br>There are two constants the source uses and you will most likely want to set:<br><blockquote><code>CACHE_DIRECTORY - the absolute path to the directory where cached data should reside<br>CACHE_PREFIX - the prefix the class should use on files in this directory</code></blockquote></p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2006-08-01T00:00:00-07:00" pubdate data-updated="true">Aug 1<span>st</span>, 2006</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2006/07/31/nibbits-update">Nibbits Update</a></h1>
    <div class="entry">
        <p>I took some time Sunday to go over Nibbits and add the flexibility it&#8217;s been needing. In doing this I added two new sections. One for <a href="http://abandonware.nibbits.com/">Abandonware Games</a>, and another for <a href="http://roms.nibbits.com/">Roms and Emulators</a>.</p>

<p>I think I&#8217;m finally closing in on a pretty solid framework for the CMS and will soon be accepting a couple sites to test run the software. The current TODO list includes:<br><ul><br><li>Internationalization</li><br><li>Templates</li><br><li>Advanced search functions</li><br><li>Caching</li><br><li>Reimplementing tag views</li><br></ul><br>For those interested, the latest changes were focused on SE flexibility for page names, such as &#8220;World of Warcraft Files&#8221; differing from &#8220;Roms and Emulators&#8221; as it has no section name appended to it. This fix was made by adding a field to both the site and the section, which lets you either use a sprintf formatted string, or simply overwrite it with a title.</p>

<p>The second major change was removing the globalization on sections. The way it&#8217;s setup now is sections are generalized, but you set which sites hold which sections, and it also tracks when they were added. Two options were added to the configuration for adjusting how long to expire &#8220;new&#8221; items. One for sections, and one for site.</p>

<p>If you&#8217;re interested in the Nibbits framework, please let me know dcramer@gmail.com and I will give you more information. I will be doing limited testing with it on external sites and will then begin licensing the software.</p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2006-07-31T00:00:00-07:00" pubdate data-updated="true">Jul 31<span>st</span>, 2006</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2006/07/23/redirect-non-www-requests-to-www">Redirect Non-WWW Requests to WWW</a></h1>
    <div class="entry">
        <p>Since everything on page one of google isn&#8217;t, well, perfect, here&#8217;s a fully working example where you don&#8217;t need to type in your silly domain name.</p>

<pre><br># redirect all non-www traffic<br>RewriteCond %{HTTP_HOST} ^([a-zA-Z0-9\-]*)\.com$<br>RewriteRule ^.*$ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]<br></pre>

<p>For the unknowing, this code uses <a href="http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html">mod_rewrite</a>.</p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2006-07-23T00:00:00-07:00" pubdate data-updated="true">Jul 23<span>rd</span>, 2006</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2006/07/11/zidanes-headbutt">Zidane&#8217;s Headbutt</a></h1>
    <div class="entry">
        <p>To be honest, I&#8217;m not a big football (soccer) fan, but the World Cup is always exciting. This year, I think it may have been even more so. With 10 minutes left in the game, the French team member Zinedine Zidane, decided he had enough. Why? Who knows, but he sure made sure an Italian player, <span class="txt3Bold">Materazzi</span><span class="txt4Bold">, by smashing his head into the Italian player&#8217;s chest.</span></p>

<p>To see it in action, check out my latest site, <a href="http://www.ggzidane.com/">Good Game Zidane</a>. The site was live 10 minutes after the event, gotta love GoDaddy and my servers :)<br><span class="txt4Bold" /></p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2006-07-11T00:00:00-07:00" pubdate data-updated="true">Jul 11<span>th</span>, 2006</time></div>
        <div class="tags">

</div>
        
    </div>
</article>

<nav id="pagenavi">
    
        <a href="/blog/page/14/" class="prev">Prev</a>
    
    
        <a href="/blog/page/16/" class="next">Next</a>
    
    <a href="/blog/archives" class="center">Blog Archives</a>
</nav></div>
	<footer class="inner">Copyright &copy; 2012 David Cramer &mdash; Need exceptional error logging? Try out <a href="https://www.getsentry.com">Sentry</a></footer>
	<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script src="/javascripts/slash.js"></script>


<script type="text/javascript">
      var disqus_shortname = 'davidcramer';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



</body>
</html>