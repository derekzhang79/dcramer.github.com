
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>David Cramer's Blog</title>
    <meta name="author" content="David Cramer">

    
    <meta name="description" content="Django CacheManager Tired of writing cache.set code? http://blogs.curse.com/25/details/38/ This is something I&#8217;ll be polishing up over the &hellip;">
    
    <meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=1">

    <link href="http://feeds.feedburner.com/DavidCramernet" rel="alternate" title="David Cramer's Blog" type="application/atom+xml">
    <link rel="canonical" href="">
    <link href="/favicon.png" rel="shortcut icon">
    <link href="/stylesheets/screen.css?1" media="screen, projection" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript">
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '4f0ffdc0844d521595000001');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>
    

</head>

<body>
	<header class="inner"><h1><a href="/">David Cramer's Blog</a></h1>
<nav class="menu"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<div class="right">
	<form class="search right" action="http://google.com/search" method="get">
		<input class="left" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:justcramer.com">
	</form>
	<div class="social right">
		
		
		
		<a class="twitter" href="http://twitter.com/zeeg" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/dcramer" title="GitHub">GitHub</a>
		
		
		
		<a class="rss" href="http://feeds.feedburner.com/DavidCramernet" title="RSS">RSS</a>
		
	</div>
</div>

</header>
	<div id="content" class="inner">


    <article class="post">
    <h1 class="title"><a href="/2007/07/04/django-cachemanager">Django CacheManager</a></h1>
    <div class="entry">
        <p>Tired of writing cache.set code?</p>

<p><a href="http://blogs.curse.com/25/details/38/">http://blogs.curse.com/25/details/38/</a></p>

<p>This is something I&#8217;ll be polishing up over the next few days, but the paste is pretty self explanatory. We will release the source (packaged) on code.curse.com as soon as its finalized and we generate unittests/proper docs.</p>

<p>I will throw this up on DjangoSnippets as soon as James creates a lost password or change password form :P</p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2007-07-04T00:00:00-07:00" pubdate data-updated="true">Jul 4<span>th</span>, 2007</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2007/07/02/inline-blocks-the-answer-to-sprites">Inline Blocks &#8211; the Answer to Sprites</a></h1>
    <div class="entry">
        <p>We&#8217;ve been working a lot on the new design at Curse lately, and one thing we&#8217;ve used heavily are CSS sprites. The only issue we had with these is they have to be a block element (or an inline-block element) in order to display them properly.</p>

<p>My first solution was to simply float them and wrap them in a fixed height container. This worked, but you can&#8217;t use text-align when they are floated. About a week later while I was looking at some cool CSS trick I found a better solution: inline-block wrappers.</p>

<p>&#8220;inline-block&#8220; is a value usable on display, which makes your element act like a block element, but without clearing content around it. The problem arises though, that inline-block does not work in older browsers.</p>

<p>The solution: wrap your block element in a container using inline-block styles. Below is the example and solution.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.inline</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">display</span><span class="o">:</span> <span class="o">-</span><span class="n">moz</span><span class="o">-</span><span class="k">inline</span><span class="o">-</span><span class="k">block</span><span class="p">;</span>
</span><span class='line'>    <span class="k">display</span><span class="o">:</span> <span class="o">-</span><span class="n">moz</span><span class="o">-</span><span class="k">inline</span><span class="o">-</span><span class="n">box</span><span class="p">;</span>
</span><span class='line'>    <span class="k">display</span><span class="o">:</span> <span class="k">inline</span><span class="o">-</span><span class="k">block</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="ni">&amp;lt;</span>span class=&quot;inline&quot;<span class="ni">&amp;gt;&amp;lt;</span>div<span class="ni">&amp;gt;</span>My inline block element<span class="ni">&amp;lt;</span>/div<span class="ni">&amp;gt;&amp;lt;</span>/span<span class="ni">&amp;gt;</span>
</span></code></pre></td></tr></table></div></figure>

<p>For those interested, here are a couple of links of this in use:<br><ul><br><li><a href="http://images.curse.com/">Image Gallery Display<br></a></li><br><li><a href="http://downloads.curse.com/details/8354/">Download Now/Add to Favorites Buttons</a></li><br></ul></p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2007-07-02T00:00:00-07:00" pubdate data-updated="true">Jul 2<span>nd</span>, 2007</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2007/06/22/wowheadcom-joins-the-ige-parade">Wowhead.com Joins the IGE Parade</a></h1>
    <div class="entry">
        <p>Wowhead.com, a very popular, World of Warcraft site with growth records spiking as high (if not higher) than Curse&#8217;s when it first launched seems to have given up (just like nearly everyone else). I was informed by <a href="http://www.techsoapbox.com/hot-off-the-presses-wowhead-sold-for-over-1-million/">a colleague</a> today that they were purchased by &#8220;Affinity Media&#8221; &#8211; one of IGE&#8217;s many fronts, parent companys, child companies; not that I know, or care, but they are related.</p>

<p>IGE, for those who aren&#8217;t familiar, is one of the largest and most controversial virtual currency providers in online gaming. It has been hated, and used, by massive amounts of players over the last few years.</p>

<p>Over the past year it had been my theory that IGE had been taking a hit, or several, losing enormous amounts of money from their investments, and even more from the gaming publishers and developers cracking down on virtual currency distribution. They wasted way too much cash, on too many sites, and then they did nothing. The site&#8217;s are still fairly large, but sites like Wowhead quickly took the spotlight, as they were created by passionate, driven people.</p>

<p>Now with yet another site in their grasps, one can only assume that they haven&#8217;t wisened up enough to actually learn how to compete in the market. Guess this means we have one less competitor out there now :)</p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2007-06-22T00:00:00-07:00" pubdate data-updated="true">Jun 22<span>nd</span>, 2007</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2007/06/11/safari-now-on-windows">Safari; Now on Windows</a></h1>
    <div class="entry">
        <p>All the Mac fans can rejoice. The ever so popular browser seems to have finally made it to Windows to tag alongside Quicktime and iTunes.</p>

<p>I&#8217;ve yet to try out the latest verison, but it seems promising. It delivers with several new features, and claims to be the fastest browser available, even on Windows.</p>

<p>For more information, and to download Safari, head over to <a href="http://www.apple.com/safari/download/">Apple</a>.</p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2007-06-11T00:00:00-07:00" pubdate data-updated="true">Jun 11<span>th</span>, 2007</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2007/06/07/it-begins-cursecom">It Begins &#8211; Curse.com</a></h1>
    <div class="entry">
        <p>So we put up the splash page today and began giving some people beta access. So far everyone loves what we&#8217;re doing with the new site, and I think it&#8217;s going to go really well at release.</p>

<p>We&#8217;ve got a several new, and many improved features we&#8217;ll be launching here next month. So keep your eye on <a href="http://www.curse.com/">Curse <strike>Gaming</strike></a> for your chance to test it out.</p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2007-06-07T00:00:00-07:00" pubdate data-updated="true">Jun 7<span>th</span>, 2007</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2007/05/24/what-powers-curse">What Powers Curse</a></h1>
    <div class="entry">
        <p>Since we&#8217;re having some issues at Curse (hardware now :P) and because our technologies page doesnt explain everything, below are more technical details.</p>

<p>Software:<br><ul><br><li>Apache2  + mod_python for the web servers</li><br><li>lighttpd + fcgi (mostly for static, we had SEVERE issues using fcgi for the entire Django site, weakref stuff, never found a solution)</li><br><li>memcached &#8211; every web server runs a copy and I believe we have 2gb allocated per-server</li><br><li>Squid + lighttpd for managing requests between anonymous and logged in users</li><br><li>Sphinx &#8211; our full-text search; the code may not reflect the current version (i&#8217;ll update it soon) but check out <a href="http://www.djangosnippets.org/snippets/231/">djangosnippets</a></li><br><li>MySQL &#8211; until someone can prove us wrong with facts saying PostgreSQL can scale better</li><br></ul><br>Hardware:<br><ul><br><li>5 web servers (8 yesterday): 4-8GB of memory, 2x intel core duos, memcached + apache2</li><br><li>2 static servers (one runs a small adserver script, another runs our sphinx search daemon): lighttpd + fcgi</li><br><li>2 media (download) server (running small python apps to generate images/similar): lighttpd + fcgi</li><br><li>2 cache servers: squid + lighttpd</li><br><li>2 sql servers (one is inactive but replicated): 2x intel core duos, MySQL, 6GB of memory (being upgraded :P)</li><br><li>1 dev/deployment server: the stats aren&#8217;t anything out of the ordinary &#8211; it runs various daemons as well as powering cursebeta.com</li><br></ul><br>What happens under the hood:<br><ul><br><li>The cache servers run both lighttpd and squid, forwarding requests to logged in users past the squid caches.</li><br><li>The squid caches then round robin to the web servers (which has caused extra stress due to the hardware not matching, we&#8217;re working on changing this now).</li><br><li>The web servers rely heavily on memcached for key components. We cache every django.contrib.contenttypes request, every django.contrib.sites request, etc..</li><br><li>We have modified various components of Django, with patches similar to what&#8217;s linked above, and with changes to select_related and some smaller systems (nothing major).</li><br><li>Most accessors to common are cached &#8211; the method we use is messy so I&#8217;ll post more when we change it.</li><br><li>Anonymous sessions are disabled &#8211; we&#8217;re still trying to manage a way to enable them and not destroy the website.</li><br><li>We use a lot of custom middleware, including a custom internationalization backend to handle our URL schemas + handle translations in the database (vs compiled files &#8211; yes, we know it&#8217;s slower)</li><br></ul></p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2007-05-24T00:00:00-07:00" pubdate data-updated="true">May 24<span>th</span>, 2007</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2007/05/23/rapid-development-serving-500000-pageshour">Rapid Development Serving 500,000 Pages/hour</a></h1>
    <div class="entry">
        <p>How do you keep things quick for development and streamlined for high-load? Using a Django and LAMP setup that&#8217;s how. We had a pretty busy couple of days over at Curse (<a href="http://www-en.curse-gaming.com/technology/">what powers curse</a>) and managed to keep a consistent 500,000+ page views per hour with our web servers only be minimally loaded on CPU and memory.</p>

<p>For 6 months we had been struggling with the question &#8220;what happens next patch day&#8221;. That day was today. We managed to break 600,000 pages an hour last december, but immediately crashed afterwards due to the servers not being able to handle the load. This is partly due to optimizations on our end to Django&#8217;s ORM but also because of some major optimizations contributed by the community (<a href="http://code.djangoproject.com/ticket/17">thanks!</a>).</p>

<p>So when you are thinking about that new website or application you&#8217;re about to build, think Python, and think Django. It has empowered us to deploy large-scale web applications in as little as a weekend, which would take a week or longer using Python or PHP by themselves.</p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2007-05-23T00:00:00-07:00" pubdate data-updated="true">May 23<span>rd</span>, 2007</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2007/03/30/lord-of-the-rings-open-beta">Lord of the Rings Open Beta</a></h1>
    <div class="entry">
        <p>It&#8217;s Friday 30 March 2007, do you know where your Hobbits are? If you pre-ordered your copy of Lord of the Rings Online: Shadows of Angmar you do! Turbine has opened the flood-gates and the seven new servers are UP and available for play!<br/><br/><a href="http://lotro-en.curse-gaming.com/previews/beta-information/1339/open-beta-has-officially-begun/">read more</a> | <a href="http://digg.com/gaming_news/Lord_of_the_Rings_Open_Beta">digg story</a></p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2007-03-30T00:00:00-07:00" pubdate data-updated="true">Mar 30<span>th</span>, 2007</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2007/01/31/ea-mythic-press-event-warhammer-online-unleashed">EA Mythic Press Event: Warhammer Online Unleashed!</a></h1>
    <div class="entry">
        <p>â€œYou lucky bastard!<br>â€ was what I was called when I told some friends I was going to get a chance to play Warhammer Online in person at the Mythic press event. In hindsight, they were right. Before I go into all the warm and fuzzy factual details that were learnt about the game at the conference, allow me to give some background information.<br/><br/><a href="http://www.curse-gaming.com/en/games/38/warhammer-online-age-of-reckoning/articles/745/ea-mythic-press-event-warhammer-online-unleashed/">read more</a>&nbsp;|&nbsp;<a href="http://digg.com/gaming_news/EA_Mythic_Press_Event_Warhammer_Online_Unleashed">digg story</a></p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2007-01-31T00:00:00-08:00" pubdate data-updated="true">Jan 31<span>st</span>, 2007</time></div>
        <div class="tags">

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/2007/01/15/announcing-the-burning-crusade-guides">Announcing the Burning Crusade Guides</a></h1>
    <div class="entry">
        <p>In preparation for the launch of World of Warcraft: The Burning Crusade, Curse will be adding information guides on the zones of Outland. The first installment is the initial zone you&#8217;ll enter upon embarking on your journey into the expansion: Hellfire Peninsula. Follow the link to read about some of the pre-Outland preparations you&#8217;ll want to make<br/><br/><a href="http://wow.curse-gaming.com/en/general-news/533/announcing-the-burning-crusade-guides/">read more</a>&nbsp;|&nbsp;<a href="http://digg.com/gaming_news/Announcing_The_Burning_Crusade_Guides">digg story</a></p>
        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2007-01-15T00:00:00-08:00" pubdate data-updated="true">Jan 15<span>th</span>, 2007</time></div>
        <div class="tags">

</div>
        
    </div>
</article>

<nav id="pagenavi">
    
        <a href="/blog/page/13/" class="prev">Prev</a>
    
    
        <a href="/blog/page/15/" class="next">Next</a>
    
    <a href="/blog/archives" class="center">Blog Archives</a>
</nav></div>
	<footer class="inner">Copyright &copy; 2012 David Cramer &mdash; Need exceptional error logging? Try out <a href="https://www.getsentry.com">Sentry</a></footer>
	<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script src="/javascripts/slash.js"></script>


<script type="text/javascript">
      var disqus_shortname = 'davidcramer';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



</body>
</html>